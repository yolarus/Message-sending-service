# Сервис рассылки сообщений

## Описание
WEB-приложение для создания и рассылки сообщений пользователям. В приложение встроен следующий функционал:
1. Возможность регистрации пользователей в приложении с последующей верификацией через отправленную на почту ссылку. 
2. Возможность сброса пароля пользователя через email.
3. Настроены различные права доступа для авторизованных, неавторизованных пользователей, модераторов и администраторов:
   * Доступ к редактированию страниц сообщений, получателей, рассылок, а также профиля пользователя открыт только для их владельцев и суперпользователя. 
   * Менеджеры имеют право только просматривать страницы из пункта выше, а также изменять статус рассылки или заблокировать пользователя (кроме суперпользователя). 
   * На страницах со списками объектов отображаются только объекты владельцев, менеджеры и суперпользователи видят все объекты. 
   * Все лишние кнопки убираются автоматически в шаблонах. 
   * Неавторизованным пользователям закрыт ко всем страницам кроме главной.
4. На главной странице представлена общая статистика всего сервиса, а также имеется ссылка на страницу статистики конкретного пользователя. 
5. Настроено кеширование списков объектов mailings, recipients, users - данные queryset'ы используются как в ListView, так и в других сервисных функциях для оптимизации работы приложения. 
6. Создана кастомная команда 'python manage.py start-scheduler' для автоматической отправки сообщений по расписанию c помощью apscheduler 
7. Созданы кастомные команды 'python manage.py load_mailings' и 'python manage.py load_users_groups_and_permissions' для заполнения БД 
8. Настроено логирование всего проекта в файл log/main.log

## Установка проекта
1. Клонирование проекта из [GitHub](https://github.com/yolarus/Message-sending-service) по HTTPS-токену или SSH-ключу.
2. Создание и заполнение файла .env своими данными.

## Установка зависимостей
1. Перейти в настройки Pycharm -> Setting -> Project -> Python Interpreter.
2. Добавить локальный интерпретатор с менеджером пакетов Poetry.
3. Выполнить команду в терминале PyCharm 'poetry install'.
4. Установить брокер Redis.

## Запуск
1. Запустить Redis, прописав в командной строке 'redis-server'. 
2. Прописать в командной строке 'python manage.py load_users_groups_and_permissions'. 
3. Прописать в командной строке 'python manage.py load_mailings'. 
4. Прописать в командной строке 'python manage.py runserver'. 
5. Нажать на ссылку на локальный сервер.

## Тестирование
1. Тесты не выполнялись.